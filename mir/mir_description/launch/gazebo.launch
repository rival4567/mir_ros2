<?xml version="1.0"?>

<launch>
    <arg name="model" default="$(find-pkg-share mir_description)/urdf/mir.urdf.xacro" />
    <arg name="start_gazebo" default="true" />
    <arg name="start_rviz" default="true" />
    <arg name="world" default="$(find-pkg-share mir_description)/world/empty.world" />

    <!-- Start Gazebo -->
    <group if="$(var start_gazebo)">
        <include file="$(find-pkg-share ros_gz_sim)/launch/gz_sim.launch.py">
            <arg name="gz_args" value="$(var world)" />
        </include>

        <node name="spawn_robot_urdf" pkg="ros_gz_sim" exec="create"
            args="-topic /robot_description -x 0.0 -y 0.0 -z 0.0 -name mir" output="screen" />
    </group>

    <!-- Add gazebo bridge for trasmitting topics from gazebo to ROS -->
    <!-- Show in RViz -->
    <group if="$(var start_rviz)">
        <include file="$(find-pkg-share mir_description)/launch/rviz.launch">
            <arg name="model" value="$(var model)" />
            <arg name="use_gui" value="false" />
            <arg name="sim" value="true" />
        </include>
    </group>
</launch>